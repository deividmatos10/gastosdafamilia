<!DOCTYPE html>
<html class="dark" lang="pt-br">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
    <title>Financeiro Família - Dashboard Real</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,200,0,0" rel="stylesheet" />
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        "deep-black": "#000000",
                        "charcoal": "#1C1C1E",
                        "subtle-grey": "#8E8E93",
                        "premium-white": "#F2F2F7"
                    },
                    fontFamily: { "sans": ["Manrope", "sans-serif"] }
                }
            }
        }
    </script>
    <style>
        body { background-color: black; touch-action: manipulation; }
        .bottom-sheet { transition: transform 0.4s cubic-bezier(0.32, 0.72, 0, 1); }
        .sheet-hidden { transform: translateY(100%); }
        .hide-scroll::-webkit-scrollbar { display: none; }
        .tap-highlight-none { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body class="text-premium-white font-sans antialiased overflow-hidden select-none">

    <!-- HOME SCREEN -->
    <div id="home-screen" class="h-screen flex flex-col overflow-y-auto pb-32 hide-scroll transition-opacity duration-300">
        <header class="sticky top-0 z-30 bg-black/80 backdrop-blur-xl px-6 pt-12 pb-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="size-10 rounded-full border border-white/10 bg-zinc-800 flex items-center justify-center overflow-hidden">
                    <span class="material-symbols-outlined text-subtle-grey">family_restroom</span>
                </div>
                <div>
                    <h1 class="text-sm font-bold tracking-tight">Família</h1>
                    <p class="text-[10px] text-subtle-grey font-bold uppercase tracking-widest">Carol & Deivid</p>
                </div>
            </div>
            <button class="size-10 rounded-full bg-charcoal flex items-center justify-center border border-white/5 active:scale-90 transition-transform tap-highlight-none">
                <span class="material-symbols-outlined text-xl">notifications</span>
            </button>
        </header>

        <main class="px-6 space-y-6">
            <!-- DASHBOARD CARD -->
            <section class="bg-charcoal rounded-[2.5rem] p-8 border border-white/5 shadow-2xl mt-4 relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-white/5 blur-3xl rounded-full -mr-16 -mt-16"></div>
                
                <div class="flex justify-between items-center mb-8 relative z-10">
                    <span id="current-month" class="text-subtle-grey text-[10px] font-bold uppercase tracking-[0.2em]">Janeiro 2026</span>
                    <span class="material-symbols-outlined text-white/30">tune</span>
                </div>

                <div class="grid grid-cols-2 gap-4 mb-10 relative z-10">
                    <div class="space-y-1">
                        <span class="text-subtle-grey text-[10px] font-bold uppercase tracking-widest">Saldo Atual</span>
                        <div class="flex items-baseline gap-1">
                            <span class="text-white/40 text-xs font-light">R$</span>
                            <span id="saldo-total" class="text-2xl font-light tracking-tight">0,00</span>
                        </div>
                    </div>
                    <div class="space-y-1 border-l border-white/10 pl-4">
                        <span class="text-subtle-grey text-[10px] font-bold uppercase tracking-widest">Gasto no Mês</span>
                        <div class="flex items-baseline gap-1">
                            <span class="text-white/40 text-xs font-light">R$</span>
                            <span id="gastos-mes" class="text-2xl font-light tracking-tight text-red-400">0,00</span>
                        </div>
                    </div>
                </div>

                <div class="space-y-3 relative z-10">
                    <div class="flex justify-between text-[10px] font-bold uppercase">
                        <span class="text-subtle-grey">Meta de Economia</span>
                        <span id="meta-percent">0%</span>
                    </div>
                    <div class="h-1.5 w-full bg-black/40 rounded-full overflow-hidden">
                        <div id="meta-bar" class="h-full bg-white/90 transition-all duration-1000 ease-out rounded-full" style="width: 0%"></div>
                    </div>
                </div>
            </section>

            <!-- CATEGORIES -->
            <section class="grid grid-cols-4 gap-3">
                <div class="flex flex-col items-center gap-2">
                    <button class="size-14 bg-charcoal border border-white/5 rounded-2xl flex items-center justify-center active:scale-90 transition-all tap-highlight-none">
                        <span class="material-symbols-outlined text-white/70">payments</span>
                    </button>
                    <span class="text-[10px] font-medium text-subtle-grey">Contas</span>
                </div>
                <div class="flex flex-col items-center gap-2">
                    <button class="size-14 bg-charcoal border border-white/5 rounded-2xl flex items-center justify-center active:scale-90 transition-all tap-highlight-none">
                        <span class="material-symbols-outlined text-white/70">volunteer_activism</span>
                    </button>
                    <span class="text-[10px] font-medium text-subtle-grey">Dízimo</span>
                </div>
                <div class="flex flex-col items-center gap-2">
                    <button onclick="openAddGasto('Maria Luiza')" class="size-14 bg-charcoal border border-white/5 rounded-2xl flex items-center justify-center active:scale-90 transition-all tap-highlight-none">
                        <span class="material-symbols-outlined text-blue-400">child_care</span>
                    </button>
                    <span class="text-[10px] font-medium text-subtle-grey">Malu</span>
                </div>
                <div class="flex flex-col items-center gap-2">
                    <button class="size-14 bg-charcoal border border-white/5 rounded-2xl flex items-center justify-center active:scale-90 transition-all tap-highlight-none">
                        <span class="material-symbols-outlined text-white/70">shield</span>
                    </button>
                    <span class="text-[10px] font-medium text-subtle-grey">Reserva</span>
                </div>
            </section>

            <!-- TRANSACTIONS -->
            <section class="space-y-4">
                <div class="flex justify-between items-center">
                    <h3 class="text-[10px] font-bold text-subtle-grey uppercase tracking-widest">Últimas Transações</h3>
                    <button onclick="resetData()" class="text-[9px] font-bold bg-white/5 px-2 py-1 rounded-md text-white/30">RESET</button>
                </div>
                <div id="transactions-list" class="space-y-2">
                    <!-- Dinâmico -->
                </div>
            </section>
        </main>
    </div>

    <!-- ADD GASTO BOTTOM SHEET -->
    <div id="add-gasto-sheet" class="fixed inset-0 z-50 bottom-sheet sheet-hidden bg-black flex flex-col">
        <div class="w-12 h-1.5 bg-white/10 rounded-full mx-auto mt-4"></div>
        <header class="p-6 flex items-center justify-between">
            <button onclick="closeAddGasto()" class="size-10 rounded-full bg-zinc-900 flex items-center justify-center tap-highlight-none"><span class="material-symbols-outlined">close</span></button>
            <h2 id="sheet-title" class="text-xs font-bold uppercase tracking-widest">Novo Gasto</h2>
            <div class="w-10"></div>
        </header>

        <div class="flex-1 px-8 flex flex-col justify-between pb-12">
            <div class="text-center pt-8">
                <span class="text-subtle-grey text-[10px] font-bold uppercase tracking-[0.3em] block mb-2">Valor do Gasto</span>
                <div class="flex items-center justify-center gap-2">
                    <span class="text-white/40 text-2xl font-light">R$</span>
                    <span id="display-value" class="text-6xl font-light tracking-tighter">0,00</span>
                </div>
            </div>

            <!-- KEYPAD -->
            <div class="grid grid-cols-3 gap-2 max-w-xs mx-auto w-full">
                <button class="h-16 text-2xl font-light rounded-2xl active:bg-white/10 tap-highlight-none" onclick="pressKey('1')">1</button>
                <button class="h-16 text-2xl font-light rounded-2xl active:bg-white/10 tap-highlight-none" onclick="pressKey('2')">2</button>
                <button class="h-16 text-2xl font-light rounded-2xl active:bg-white/10 tap-highlight-none" onclick="pressKey('3')">3</button>
                <button class="h-16 text-2xl font-light rounded-2xl active:bg-white/10 tap-highlight-none" onclick="pressKey('4')">4</button>
                <button class="h-16 text-2xl font-light rounded-2xl active:bg-white/10 tap-highlight-none" onclick="pressKey('5')">5</button>
                <button class="h-16 text-2xl font-light rounded-2xl active:bg-white/10 tap-highlight-none" onclick="pressKey('6')">6</button>
                <button class="h-16 text-2xl font-light rounded-2xl active:bg-white/10 tap-highlight-none" onclick="pressKey('7')">7</button>
                <button class="h-16 text-2xl font-light rounded-2xl active:bg-white/10 tap-highlight-none" onclick="pressKey('8')">8</button>
                <button class="h-16 text-2xl font-light rounded-2xl active:bg-white/10 tap-highlight-none" onclick="pressKey('9')">9</button>
                <button class="h-16 text-lg font-light rounded-2xl active:bg-white/10 tap-highlight-none" onclick="pressKey('00')">00</button>
                <button class="h-16 text-2xl font-light rounded-2xl active:bg-white/10 tap-highlight-none" onclick="pressKey('0')">0</button>
                <button class="h-16 flex items-center justify-center rounded-2xl active:bg-white/10 tap-highlight-none" onclick="pressKey('del')"><span class="material-symbols-outlined">backspace</span></button>
            </div>

            <button onclick="confirmGasto()" class="w-full bg-white text-black font-bold h-16 rounded-3xl active:scale-95 transition-transform shadow-xl tap-highlight-none">
                Confirmar Gasto
            </button>
        </div>
    </div>

    <!-- BOTTOM NAV -->
    <nav class="fixed bottom-0 inset-x-0 bg-black/90 backdrop-blur-xl border-t border-white/5 px-10 pt-4 pb-10 flex justify-between items-center z-40">
        <button class="text-white tap-highlight-none"><span class="material-symbols-outlined !text-3xl font-variation-fill">home</span></button>
        <button class="text-white/30 tap-highlight-none"><span class="material-symbols-outlined !text-3xl">receipt_long</span></button>
        <button onclick="openAddGasto('Geral')" class="size-14 bg-white text-black rounded-full -mt-14 shadow-2xl flex items-center justify-center active:scale-90 transition-transform tap-highlight-none">
            <span class="material-symbols-outlined !text-4xl font-bold">add</span>
        </button>
        <button class="text-white/30 tap-highlight-none"><span class="material-symbols-outlined !text-3xl">monitoring</span></button>
        <button class="text-white/30 tap-highlight-none"><span class="material-symbols-outlined !text-3xl">settings</span></button>
    </nav>

    <script>
        // --- LOGICA DE DADOS ---
        let state = {
            saldoInicial: 10000,
            transactions: [],
            currentCategory: "Geral"
        };

        let currentInput = "0";

        function init() {
            const saved = localStorage.getItem('finance_data');
            if (saved) state = JSON.parse(saved);
            render();
        }

        function save() {
            localStorage.setItem('finance_data', JSON.stringify(state));
            render();
        }

        function render() {
            const totalGastos = state.transactions.reduce((acc, t) => acc + t.amount, 0);
            const saldoAtual = state.saldoInicial - totalGastos;
            const metaPerc = Math.min(Math.round((saldoAtual / state.saldoInicial) * 100), 100);

            // Dashboard
            document.getElementById('saldo-total').innerText = formatCurrency(saldoAtual);
            document.getElementById('gastos-mes').innerText = formatCurrency(totalGastos);
            document.getElementById('meta-percent').innerText = metaPerc + '%';
            document.getElementById('meta-bar').style.width = metaPerc + '%';
            document.getElementById('current-month').innerText = new Intl.DateTimeFormat('pt-BR', { month: 'long', year: 'numeric' }).format(new Date());

            // Transactions
            const list = document.getElementById('transactions-list');
            list.innerHTML = state.transactions.length === 0 
                ? '<p class="text-center py-10 text-subtle-grey text-xs uppercase tracking-widest opacity-50 italic">Nenhuma transação este mês</p>'
                : state.transactions.map(t => `
                    <div class="bg-charcoal p-4 rounded-3xl border border-white/5 flex items-center justify-between animate-in fade-in slide-in-from-bottom-2 duration-500">
                        <div class="flex items-center gap-4">
                            <div class="size-10 bg-black rounded-2xl flex items-center justify-center">
                                <span class="material-symbols-outlined text-lg ${t.category === 'Maria Luiza' ? 'text-blue-400' : 'text-white/50'}">
                                    ${t.category === 'Maria Luiza' ? 'child_care' : 'shopping_basket'}
                                </span>
                            </div>
                            <div>
                                <p class="text-sm font-semibold">${t.category}</p>
                                <p class="text-[9px] text-subtle-grey uppercase font-bold">${t.date}</p>
                            </div>
                        </div>
                        <span class="text-sm font-bold tracking-tight">- R$ ${formatCurrency(t.amount)}</span>
                    </div>
                `).join('');
        }

        // --- UX ACTIONS ---
        function pressKey(key) {
            if (key === 'del') {
                currentInput = currentInput.length > 1 ? currentInput.slice(0, -1) : "0";
            } else if (key === '00') {
                currentInput += "00";
            } else {
                if (currentInput === "0") currentInput = key;
                else currentInput += key;
            }
            updateDisplay();
        }

        function updateDisplay() {
            const val = parseFloat(currentInput) / 100;
            document.getElementById('display-value').innerText = val.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
        }

        function openAddGasto(cat) {
            state.currentCategory = cat;
            document.getElementById('sheet-title').innerText = "Novo Gasto: " + cat;
            document.getElementById('add-gasto-sheet').classList.remove('sheet-hidden');
            document.getElementById('home-screen').style.opacity = "0.2";
            currentInput = "0";
            updateDisplay();
        }

        function closeAddGasto() {
            document.getElementById('add-gasto-sheet').classList.add('sheet-hidden');
            document.getElementById('home-screen').style.opacity = "1";
        }

        function confirmGasto() {
            const amount = parseFloat(currentInput) / 100;
            if (amount <= 0) return;

            const newTransaction = {
                id: Date.now(),
                category: state.currentCategory,
                amount: amount,
                date: new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: 'short' }) + ' • ' + (Math.random() > 0.5 ? 'Carol' : 'Deivid')
            };

            state.transactions.unshift(newTransaction);
            save();
            closeAddGasto();
        }

        function resetData() {
            if(confirm("Deseja zerar todos os gastos do mês?")) {
                state.transactions = [];
                save();
            }
        }

        function formatCurrency(val) {
            return val.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }

        init();
    </script>
</body>
</html>fdfdf